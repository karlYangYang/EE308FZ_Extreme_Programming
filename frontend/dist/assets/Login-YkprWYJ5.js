import{ax as k,aw as V,at as E,a4 as b,ay as B}from"./el-form-item-BbKrFt7i.js";import{al as U,as as z,r as m,m as C,j as I,f as a,k as s,w as r,ad as L,av as N,a0 as R,b as h,u as f,aG as q,aH as F,aa as c}from"./index-DbjGJf48.js";import{l as K}from"./auth-B04nHL3G.js";const S={class:"login-container"},j={class:"login-card"},G={class:"form-footer"},H={__name:"Login",setup(M){const _=N(),g=z(),t=m(!1),l=m(null),o=C({username:"",password:""}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},u=async()=>{l.value&&await l.value.validate(async i=>{if(i){t.value=!0;try{const e=await K(o);g.setUser(e.user),B.success("登录成功"),_.push("/")}catch(e){console.error(e)}finally{t.value=!1}}})};return(i,e)=>{const d=E,p=V,w=b,y=R("router-link"),x=k;return h(),I("div",S,[a("div",j,[e[5]||(e[5]=a("div",{class:"login-header"},[a("h1",null,"欢迎回来"),a("p",null,"请登录您的通讯录账号")],-1)),s(x,{ref_key:"formRef",ref:l,model:o,rules:v,class:"login-form",onKeyup:L(u,["enter"])},{default:r(()=>[s(p,{prop:"username"},{default:r(()=>[s(d,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=n=>o.username=n),placeholder:"用户名/邮箱","prefix-icon":f(q),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),s(p,{prop:"password"},{default:r(()=>[s(d,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=n=>o.password=n),type:"password",placeholder:"密码","prefix-icon":f(F),"show-password":"",size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),s(w,{type:"primary",loading:t.value,class:"login-button",size:"large",onClick:u},{default:r(()=>[...e[2]||(e[2]=[c(" 登录 ",-1)])]),_:1},8,["loading"]),a("div",G,[e[4]||(e[4]=a("span",null,"还没有账号?",-1)),s(y,{to:"/register",class:"register-link"},{default:r(()=>[...e[3]||(e[3]=[c("立即注册",-1)])]),_:1})])]),_:1},8,["model"])])])}}},J=U(H,[["__scopeId","data-v-a374758f"]]);export{J as default};
