import{ax as P,aw as E,at as b,a4 as k,ay as R}from"./el-form-item-BbKrFt7i.js";import{al as U,as as z,r as f,m as B,j as C,f as n,k as o,w as l,ad as F,av as I,a0 as N,b as q,u,aG as K,ao as S,aH as g,aa as c}from"./index-DbjGJf48.js";import{r as h}from"./auth-B04nHL3G.js";const j={class:"login-container"},D={class:"login-card"},G={class:"form-footer"},H={__name:"Register",setup(M){const w=I(),_=z(),m=f(!1),i=f(null),r=B({username:"",email:"",password:"",confirmPassword:""}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,message:"用户名至少3个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{validator:(d,e,s)=>{e===""?s(new Error("请输入密码")):(r.confirmPassword!==""&&i.value.validateField("confirmPassword"),s())},trigger:"blur"},{min:6,message:"密码至少6个字符",trigger:"blur"}],confirmPassword:[{validator:(d,e,s)=>{e===""?s(new Error("请再次输入密码")):e!==r.password?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}]},p=async()=>{i.value&&await i.value.validate(async d=>{if(d){m.value=!0;try{const{confirmPassword:e,...s}=r,t=await h(s);_.setUser(t.user),R.success("注册成功"),w.push("/")}catch(e){console.error(e)}finally{m.value=!1}}})};return(d,e)=>{const s=b,t=E,V=k,x=N("router-link"),y=P;return q(),C("div",j,[n("div",D,[e[7]||(e[7]=n("div",{class:"login-header"},[n("h1",null,"创建账号"),n("p",null,"开始管理您的通讯录")],-1)),o(y,{ref_key:"formRef",ref:i,model:r,rules:v,class:"login-form",onKeyup:F(p,["enter"])},{default:l(()=>[o(t,{prop:"username"},{default:l(()=>[o(s,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=a=>r.username=a),placeholder:"用户名","prefix-icon":u(K),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(t,{prop:"email"},{default:l(()=>[o(s,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=a=>r.email=a),placeholder:"电子邮箱","prefix-icon":u(S),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(t,{prop:"password"},{default:l(()=>[o(s,{modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=a=>r.password=a),type:"password",placeholder:"密码","prefix-icon":u(g),"show-password":"",size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(t,{prop:"confirmPassword"},{default:l(()=>[o(s,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>r.confirmPassword=a),type:"password",placeholder:"确认密码","prefix-icon":u(g),"show-password":"",size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(V,{type:"primary",loading:m.value,class:"login-button",size:"large",onClick:p},{default:l(()=>[...e[4]||(e[4]=[c(" 立即注册 ",-1)])]),_:1},8,["loading"]),n("div",G,[e[6]||(e[6]=n("span",null,"已有账号?",-1)),o(x,{to:"/login",class:"register-link"},{default:l(()=>[...e[5]||(e[5]=[c("返回登录",-1)])]),_:1})])]),_:1},8,["model"])])])}}},Q=U(H,[["__scopeId","data-v-49587d4e"]]);export{Q as default};
